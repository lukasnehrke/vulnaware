package dev.lukasnehrke.vulnaware.vulnerability.task;

import dev.lukasnehrke.vulnaware.vulnerability.service.MonitoringService;
import lombok.RequiredArgsConstructor;
import org.springframework.boot.CommandLineRunner;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Profile;
import org.springframework.stereotype.Component;

@Component
@Profile("monitoring-job")
@RequiredArgsConstructor
class MonitoringJob {

    private final MonitoringService monitoringService;

    @Bean
    public CommandLineRunner sync() {
        return args -> {
            this.monitoringService.analyzeMonitored();
        };
    }
}
